<div style="padding:0;width:110px;min-height:118px;" class="cmd #history# tooltips cmd-widget cursor container-fluid  " data-type="info" data-subtype="numeric" data-cmd_id="#id#" data-cmd_uid="#uid#" data-version="#version#" data-eqLogic_id="#eqLogic_id#" data-eqLogic_id="#eqLogic_id#">
 	<!-- Info Widget
		Basé sur les widget de 	: jpoilux
		Mise à jour 			: JAG 20190317 : Correction Bug non actualisation des données (merci à Antoinekl1 & cadavor)
	-->
  <center>
	<div class="row">
		<center>
		<div class="cmdName" id="cmdName#id#" style="font-weight: bold;font-size : 10px; #hideCmdName#;">#name_display# </div>
		<div style="font-size: 2.5em;margin-top:5px;" class="iconCmd"></div>
      		<div style="font-size: 2.5em;margin-top:-10px;" class="iconCmd_H"></div>
      		<div class='state' style="vertical-align: middle; text-align: center; margin-top: -32px; font-weight: bold; font-size: 14px; height: 18px;">#state##unite#</div>
      	<!-- Historique -->
      		<div style="#displayHistory# font-weight: bold;font-size : 10px;margin-top:5px;">
      			<span title="Min" class="tooltips">#minHistoryValue##unite#</span>|<span title="Moyenne" class="tooltips" >#averageHistoryValue##unite#</span>|<span title="Max" class="tooltips">#maxHistoryValue##unite#</span> <i class="#tendance#"></i>	
      		</div>
	</center>
	</div>
	</center>
 	<script>
 		jeedom.cmd.update['#id#'] = function(_options){
		// Options de personnalisation avec valeur par defaut
          // Paramètre "sizehw" : à déclarer en pixels - 80 maxi
              var srcImgHeight 		= (is_numeric('#sizeh#')) 	? parseFloat('#sizeh#') 	: 65;
              var srcImgWidth		= (is_numeric('#sizew#')) 	? parseFloat('#sizew#') 	: 30;
          // Paramétrage Niveau
              var level_0 			= (is_numeric('#level_0#'))  ? parseFloat('#level_0#') 	: 0;
              var level_20 			= (is_numeric('#level_20#')) ? parseFloat('#level_20#') : 20.0;	
              var level_40  		= (is_numeric('#level_40#')) ? parseFloat('#level_40#') : 40.0;
              var level_60 			= (is_numeric('#level_60#')) ? parseFloat('#level_60#') : 60.0;
              var level_80 			= (is_numeric('#level_80#')) ? parseFloat('#level_80#') : 80.0;
          	  var level_100 		= (is_numeric('#level_100#')) ? parseFloat('#level_100#') : 100.0;
        // Paramétrage des images
			  var srcImgURL 		= 'plugins/widget/core/template/dashboard/cmd.info.numeric.Batterie-EeDomus/';
      		  var srcImglogo		= ('#logo#'!='#'+'logo#') ? "#logo#" : "battery_";
          	  var srcImglogoLabel	= ('#logoLabel#'!='#'+'logoLabel#') ? "#logoLabel#" : "bottom_";
      // Update
			var srcPictureID;     
			var State = parseFloat(_options.display_value);	
			if (State <= level_0){
              srcPictureID = "20";
            } else if (State > level_0 && State <= level_20){
              srcPictureID = "20";
            } else if (State > level_20 && State <= level_40){
              srcPictureID = "40";
            } else if (State > level_40 && State <=level_60){
              srcPictureID = "60";
            } else if (State > level_60 && State <=level_80){
              srcPictureID = "80";
            } else if (State > level_80 && State <=level_100){
              srcPictureID = "100";
            } else {
              srcPictureID = "error";
            }        
   
		// Update Value or img
          	$('.cmd[data-cmd_uid=#uid#] .iconCmd').html('<img src="'+srcImgURL + srcImglogo+ +srcPictureID+ '.png" style="height:' + srcImgHeight +'px;width:' + srcImgWidth +'px;">'); 
          	$('.cmd[data-cmd_uid=#uid#] .iconCmd_H').html('<img src="'+srcImgURL + srcImglogoLabel+ +srcPictureID+ '.png">'); 
			$('.cmd[data-cmd_uid=#uid#] .state').text(State+'#unite#');
			$('.cmd[data-cmd_id=#id#]').attr('title','Valeur du '+_options.valueDate);
		}     
   	jeedom.cmd.update['#id#']({display_value:'#state#',valueDate:'#valueDate#',collectDate:'#collectDate#',alertLevel:'#alertLevel#'}); 
	</script>
</div>